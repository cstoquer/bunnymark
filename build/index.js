!function t(e,r,i){function n(o,a){if(!r[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[o]={exports:{}};e[o][0].call(l.exports,function(t){var r=e[o][1][t];return n(r?r:t)},l,l.exports,t,e,r,i)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(t,e,r){function i(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r}function n(t,e){this.canvas=i(t,e),this.ctx=this.canvas.getContext("2d"),this._cursor={i:0,j:0},this._paper=0,this._pen=1,this._textColumn=~~(t/4),this._textLine=~~(e/6),this._textOffset=1,this._textPadding=e-6*this._textLine-this._textOffset,this.camera={x:0,y:0},this.ctx.fillStyle=this.palette[0],this.ctx.strokeStyle=this.palette[1]}function s(t,e){for(var r=[219,438,511,14016,14043,14326,14335,28032,28123,28086,28159,32704,32731,32758,32767,128,146,384,402,9344,9362,9600,9618,192,210,448,466,9408,9426,9664,9682,32767,0,8338,45,11962,5588,21157,29354,10,17556,5265,21973,1488,5312,448,13824,5268,31599,29843,29671,31143,18925,31183,31689,18735,31727,18927,1040,5136,17492,3640,5393,8359,25450,23530,31467,25166,15211,29391,4815,27470,23533,29847,15142,23277,29257,23421,23403,11114,4843,26474,23279,14798,9367,27501,12141,24429,23213,14829,29351,25750,17553,13459,9402,28672,34,23530,31467,25166,15211,29391,4815,27470,23533,29847,15142,23277,29257,23421,23403,11114,4843,26474,23279,14798,9367,27501,12141,24429,23213,14829,29351,25686,9362,13587,42,21845],i=0;i<e.length;i++){t.fillStyle=e[i];for(var n=0;n<r.length;n++)for(var s=r[n],o=0;o<15;o++){var a=o%3,h=~~(o/3),u=s>>o&1;1===u&&t.fillRect(3*n+a,5*i+h,1,1)}}t.fillStyle=e[0]}var o=settings.tileSize[0],a=settings.tileSize[1],h=16,u=Math.PI/2;e.exports=n,n.prototype._isTexture=!0,n.prototype.palette=["#000000","#FFFFFF"],n.prototype.tilesheet=new n(o*h,a*h),n.prototype.textCharset=new n(384,5*n.prototype.palette.length),n.prototype.resize=function(t,e){return this.canvas.width=t,this.canvas.height=e,this._textColumn=~~(t/4),this._textLine=~~(e/6),this._textOffset=1,this._cursor.i=0,this._cursor.j=0,this.clear(),this},n.prototype.setPalette=function(t){n.prototype.palette=t,n.prototype.textCharset=new n(384,5*t.length),s(n.prototype.textCharset.ctx,t)},n.prototype.setGlobalTilesheet=function(t){n.prototype.tilesheet.clear().draw(t,0,0)},n.prototype.setTilesheet=function(t){return t?(this.tilesheet===n.prototype.tilesheet&&(this.tilesheet=new n(o*h,a*h)),this.tilesheet.clear().draw(t,0,0),this):void delete this.tilesheet},n.prototype.setCamera=function(t,e){return this.camera.x=t||0,this.camera.y=e||0,this},n.prototype.sprite=function(t,e,r,i,n,s){var l=t%h,c=~~(t/h),p=this.ctx;return e=e||0,r=r||0,e=~~Math.round(e-this.camera.x),r=~~Math.round(r-this.camera.y),i||n||s?(p.save(),i&&(p.scale(-1,1),e*=-1,e-=o),n&&(p.scale(1,-1),r*=-1,r-=a),s?(p.translate(e+a,r),p.rotate(u)):p.translate(e,r),p.drawImage(this.tilesheet.canvas,l*o,c*a,o,a,0,0,o,a),p.restore(),this):(p.drawImage(this.tilesheet.canvas,l*o,c*a,o,a,e,r,o,a),this)},n.prototype.draw=function(t,e,r,i,n,s){t._isTileMap&&(t=t.texture.canvas),t._isTexture&&(t=t.canvas);var o=~~Math.round((e||0)-this.camera.x),a=~~Math.round((r||0)-this.camera.y);if(!i&&!n&&!s)return this.ctx.drawImage(t,o,a),this;var h=this.ctx;return h.save(),i&&(h.scale(-1,1),o*=-1,o-=t.width),n&&(h.scale(1,-1),a*=-1,a-=t.height),s?(h.translate(o+t.height,a),h.rotate(u)):h.translate(o,a),h.drawImage(t,0,0),h.restore(),this},n.prototype.clear=function(){return this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this},n.prototype.cls=function(){return this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.locate(0,0),this},n.prototype.pen=function(t){return this._pen=t%this.palette.length,this.ctx.strokeStyle=this.palette[this._pen],this},n.prototype.paper=function(t){return this._paper=t%this.palette.length,this.ctx.fillStyle=this.palette[this._paper],this},n.prototype.rect=function(t,e,r,i){return this.ctx.strokeRect(~~(t-this.camera.x)+.5,~~(e-this.camera.y)+.5,~~(r-1),~~(i-1)),this},n.prototype.rectfill=function(t,e,r,i){return this.ctx.fillRect(~~(t-this.camera.x),~~(e-this.camera.y),~~r,~~i),this},n.prototype.locate=function(t,e){return this._cursor.i=~~t,this._cursor.j=~~e,this},n.prototype.print=function(t,e,r){if("object"==typeof t)try{t=JSON.stringify(t)}catch(e){t="[Object]"}else"string"!=typeof t&&(t=t.toString());if(void 0!==e){e=~~Math.round(e-this.camera.x),r=~~Math.round(r-this.camera.y);for(var i=0;i<t.length;i++)this.ctx.drawImage(this.textCharset.canvas,3*t.charCodeAt(i),5*this._pen,3,5,e,r,3,5),e+=4;return this}for(var i=0;i<t.length;i++){this._cursor.j>=this._textLine&&this.textScroll();var n=t.charCodeAt(i);10!==n&&13!==n?(this.ctx.drawImage(this.textCharset.canvas,3*n,5*this._pen,3,5,4*this._cursor.i,6*this._cursor.j+this._textOffset,3,5),this._cursor.i+=1,this._cursor.i>this._textColumn&&(this._cursor.i=0,this._cursor.j+=1)):(this._cursor.i=0,this._cursor.j+=1)}return this},n.prototype.println=function(t){return this.print(t),this.print("\n"),this},n.prototype.textScroll=function(t){return void 0===t&&(t=1),this._cursor.j-=t,t*=6,this.ctx.drawImage(this.canvas,0,-t),this.ctx.fillRect(0,this.canvas.height-t-this._textPadding,this.canvas.width,t+this._textPadding),this}},{}],2:[function(t,e,r){function i(t,e,r,i,n,s,o,a){this.x=~~t,this.y=~~e,this.sprite=~~r,this.flipH=!!i,this.flipV=!!n,this.flipR=!!s,this.flagA=!!o,this.flagB=!!a}function n(t,e){this._name="",this.width=0,this.height=0,this.items=[],this.texture=new s(t*o,e*a),this._tilesheetPath="",t&&e&&this._init(t,e)}var s=t("../Texture"),o=settings.tileSize[0],a=settings.tileSize[1];i.prototype.draw=function(t){t.sprite(this.sprite,this.x*o,this.y*a,this.flipH,this.flipV,this.flipR)},e.exports=n,n.prototype._isTileMap=!0;var h={},u=[];n.getMap=function(t){return"string"==typeof t?h[t]:"number"==typeof t?u[t]:(console.error("Map does not exist",t),null)},n._checkBankFormat=function(t){return t?Array.isArray(t)?{_type:"maps",maps:t}:"maps"!==t._type?(console.warn("Map bank format incorrect"),{_type:"maps",maps:[]}):t:(console.warn("No map bank"),{_type:"maps",maps:[]})},n.loadBank=function(t){t=n._checkBankFormat(t);for(var e=[],r=t.maps||[],i=0;i<r.length;i++)e.push((new n).load(r[i]))},Object.defineProperty(n.prototype,"name",{get:function(){return this._name},set:function(t){this._name&&h[this._name]&&h[this._name]===this&&delete h[this._name],this._name=t,t&&!h[t]&&(h[t]=this)}}),n.prototype._init=function(t,e){this.texture.resize(t*o,e*a),this.width=t,this.height=e,this.items=[];for(var r=0;r<t;r++){this.items.push([]);for(var i=0;i<e;i++)this.items[r][i]=null}},n.prototype.resize=function(t,e){var r=this.items,i=Math.min(this.width,t),n=Math.min(this.height,e);this.texture.resize(t*o,e*a),this._init(t,e);for(var s=0;s<i;s++)for(var h=0;h<n;h++)this.items[s][h]=r[s][h];return this.redraw(),this},n.prototype.set=function(t,e,r,n,s,h,u,l){if(null===r||void 0===r)return this.remove(t,e);if(!(t<0||e<0||t>=this.width||e>=this.height)){var c=this.items[t][e]=new i(t,e,r,n,s,h,u,l);return this.texture.ctx.clearRect(t*o,e*a,o,a),c.draw(this.texture),this}},n.prototype.remove=function(t,e){if(!(t<0||e<0||t>=this.width||e>=this.height))return this.items[t][e]=null,this.texture.ctx.clearRect(t*o,e*a,o,a),this},n.prototype.get=function(t,e){return t<0||e<0||t>=this.width||e>=this.height?null:this.items[t][e]},n.prototype.redraw=function(){this.texture.clear();for(var t=0;t<this.width;t++)for(var e=0;e<this.height;e++)this.items[t][e]&&this.items[t][e].draw(this.texture);return this},n.prototype.draw=function(t,e){draw(this.texture,t,e)},n.prototype.setTilesheet=function(t){return this._tilesheetPath=t&&t.path||"",this.texture.setTilesheet(t),this.redraw(),this},n.prototype._setTilesheetPath=function(t){if(this._tilesheetPath=t||"",!t)return this.setTilesheet();t=t.split("/"),fileId=t.pop();for(var e=assets,r=0;r<t.length;r++)if(e=e[t[r]],!e)return console.warn("Could not find tilesheet",t);var i=e[fileId];i&&i instanceof Image&&this.setTilesheet(i)};var l,c;!function(){function t(t){var r=~~(t/n),i=t%n;return e[r]+e[i]}for(var e="#$%&'()*+,-~/0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}. !",r={},i=0;i<e.length;i++)r[e[i]]=i;var n=e.length,s=n*n-1,o=Math.pow(2,13),a=s-o-1;l=function(e){str="",count=0;for(var r=0;r<e.length;r++){var i=e[r];i===e[r+1]&&++count<a||(null===i&&(i=s),str+=t(i),count===a&&count--,0!==count&&(str+=t(o+count)),count=0)}return count===a&&count--,0!==count&&(str+=t(o+count)),str},c=function(t){arr=[];for(var e=0;e<t.length;){var i=t[e++],a=t[e++],h=r[i]*n+r[a];if(h===s)arr.push(null);else if(h>o)for(var u=h-o,l=arr[arr.length-1],c=0;c<u;c++)arr.push(l);else arr.push(h)}return arr}}(),n.prototype.save=function(){for(var t=this.width,e=this.height,r=new Array(t*e),i=0;i<t;i++)for(var n=0;n<e;n++){var s=this.items[i][n];r[i+n*t]=s?s.sprite+(s.flipH<<8)+(s.flipV<<9)+(s.flipR<<10)+(s.flagA<<11)+(s.flagB<<12):null}var o={w:t,h:e,name:this.name,sheet:this._tilesheetPath||"",data:l(r)};return o},n.prototype.load=function(t){var e=t.w,r=t.h;this._init(e,r),this.name=t.name||"",this._setTilesheetPath(t.sheet);for(var i=c(t.data),n=0;n<e;n++)for(var s=0;s<r;s++){var o=i[n+s*e];if(null!==o){var a=255&o,h=o>>8&1,u=o>>9&1,l=o>>10&1,p=o>>11&1,f=o>>12&1;this.set(n,s,a,h,u,l,p,f)}}return this.redraw(),this},n.prototype.copy=function(t,e,r,i){t=t||0,e=e||0,void 0!==r&&null!==r||(r=this.width),void 0!==i&&null!==i||(i=this.height);var s=new n(r,i);return s.paste(this,-t,-e),s},n.prototype.paste=function(t,e,r,i){e=e||0,r=r||0;for(var n=Math.min(t.width,this.width-e),s=Math.min(t.height,this.height-r),o=Math.max(0,-e),a=Math.max(0,-r),h=o;h<n;h++)for(var u=a;u<s;u++){var l=t.items[h][u];if(l)this.set(h+e,u+r,l.sprite,l.flipH,l.flipV,l.flipR,l.flagA,l.flagB);else{if(i)continue;this.remove(h+e,u+r)}}return this.redraw(),this},n.prototype.clear=function(){for(var t=0;t<this.width;t++)for(var e=0;e<this.height;e++)this.items[t][e]=null;return this.texture.clear(),this},n.prototype.find=function(t,e,r){if(null===t)return this._findNull();void 0===e&&(e=null),void 0===r&&(r=null);for(var i=[],n=0;n<this.width;n++)for(var s=0;s<this.height;s++){var o=this.items[n][s];if(o){var a=null===e||o.flagA===e,h=null===r||o.flagB===r;o.sprite===t&&a&&h&&i.push(o)}}return i},n.prototype._findNull=function(){for(var t=[],e=0;e<this.width;e++)for(var r=0;r<this.height;r++)null===this.items[e][r]&&t.push({x:e,y:r});return t}},{"../Texture":1}],3:[function(t,e,r){function i(t,e,r){var i=new XMLHttpRequest;i.responseType=e||"arraybuffer",i.onreadystatechange=function(){if(4===~~i.readyState)return 200!==~~i.status&&0!==~~i.status?r&&r("xhrError:"+i.status):r&&r(null,i.response)},i.open("GET",t,!0),i.send()}function n(t,e){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===~~r.readyState)return 200!==~~r.status?e("xhrError:"+r.status):e&&e(null,JSON.parse(r.response))},r.open("GET",t,!0),r.send()}function s(t,e){var r=new XMLHttpRequest;r.open("POST","req",!0),r.setRequestHeader("Content-Type","application/json; charset=UTF-8"),r.onreadystatechange=function(){if(4===~~r.readyState){if(200!==~~r.status)return e&&e("xhr:"+r.status);var t=JSON.parse(r.response);return e&&e(t.error,t.result)}},r.send(JSON.stringify(t))}function o(t,e){var r=new Image;r.onload=function(){this.onload=null,this.onerror=null,e&&e(null,this)},r.onerror=function(){this.onload=null,this.onerror=null,e&&e("img:"+t)},r.src=t}function a(t,e){function r(){e&&e(null,n),n.removeEventListener("canplaythrough",r),n.removeEventListener("error",i)}function i(){e&&e("snd:load"),n.removeEventListener("canplaythrough",r),n.removeEventListener("error",i)}var n=new Audio;n.preload=!0,n.loop=!1,n.addEventListener("canplaythrough",r),n.addEventListener("error",i),n.src=t,n.load()}function h(t,e){n("build/data.json",function(r,i){function n(t,e){var r=t.split("/"),i=r.pop(),n=i.split(".");n.pop(),n=n.join(".");for(var s=h,o=0,a=r.length;o<a;o++)s=s[r[o]];s[n]=e,r.push(n),e.name=n,e.path=r.join("/")}function s(){var r=p+f,d=r/l;e&&e(p,r,l,d);var v,m;r<u?(v=i.img[r],m=o):(v=i.snd[r-u],m=a),f+=1,m(c+v,function(e,r){e||n(v,r),p+=1,f-=1,p+f<l?s():0===f&&t(null,h)})}if(r)return t(r);var h=i.dat,u=i.img.length,l=u+i.snd.length,c=i.root,p=0,f=0;if(0===l)return t(null,h);for(var d=Math.min(5,l-1),v=0;v<=d;v++)s()})}r.loadData=i,r.loadJson=n,r.sendRequest=s,r.loadImage=o,r.loadSound=a,r.preloadStaticAssets=h},{}],4:[function(t,e,r){function i(t,e){function r(e){e.preventDefault(),t.style.left=e.clientX-s+"px",t.style.top=e.clientY-o+"px"}function i(t){t.preventDefault(),n.removeEventListener("mouseup",i),n.removeEventListener("mousemove",r)}var n=document;rect=t.getBoundingClientRect();var s=e.clientX-rect.left,o=e.clientY-rect.top;n.addEventListener("mousemove",r,!1),n.addEventListener("mouseup",i,!1)}var n=document.getElementsByTagName("body")[0];r.createDom=function(t,e,r){r=r||n;var i=document.createElement(t);return r.appendChild(i),e&&(i.className=e),i},r.createDiv=function(t,e){return r.createDom("div",t,e)},r.removeDom=function(t,e){e=e||n,e.removeChild(t)},r.makeButton=function(t,e){return t.addEventListener("mousedown",function(r){r.stopPropagation(),r.preventDefault(),e(r,t)}),t},r.makeDragable=function(t,e){return e=e||t,t.addEventListener("mousedown",function(t){t.stopPropagation(),t.preventDefault(),i(e,t)}),t}},{}],5:[function(t,e,r){e.exports={name:"pixelboxGL-bunnymark",screen:{width:400,height:300,pixelSize:[2,2],fullscreen:!1},tileSize:[8,8],palette:["#000000","#FFF1E8","#008751","#AB5236","#7E2553","#5F574F","#29ADFF","#00E756","#FFA300","#FF77A8","#C2C3C7","#83769C","#FFFF27","#FFCCAA","#1D2B53","#FF004D"],controls:{up:38,down:40,left:37,right:39,A:32,B:88},touchEvent:{multiTouch:!1,disableContextMenu:!1,hideMousePointer:!1},loaderColors:[0,1],components:{pixelboxCore:!0,keyboard:!0,AudioManager:!1,TINA:!1}}},{}],6:[function(t,e,r){function i(){this.program=s.tilepoint,this.vertex=new Float32Array(a*o),this.vertexBuffer=gl.createBuffer(),n.useProgram(this.program)}var n=t("./screenGL"),s=t("./shaders"),o=2,a=2048,h=4;i.prototype.tiles=function(t,e){for(var r=e.length,i=Math.ceil(r/a),s=0,u=0;u<i;u++){for(var l=Math.min(a,r-s),c=0;c<l;c++)this.vertex[2*c]=e[s+c].x,this.vertex[2*c+1]=e[s+c].y;gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffer),gl.bufferData(gl.ARRAY_BUFFER,this.vertex,gl.STATIC_DRAW);var p=gl.getAttribLocation(this.program,"a_coordinates");gl.enableVertexAttribArray(p),gl.vertexAttribPointer(p,o,gl.FLOAT,!1,h*o,0),n.bindTexture(t,0);var f=gl.getUniformLocation(this.program,"u_texture");gl.uniform1i(f,0),gl.drawArrays(gl.POINTS,0,l),s+=a}},e.exports=new i},{"./screenGL":8,"./shaders":9}],7:[function(t,e,r){function i(t){for(var e=0;e<t;e++)a.push({x:2*(Math.random()-.5),y:2*(Math.random()-.5),sx:(Math.random()-.5)*o,sy:(Math.random()-.5)*o})}var n=t("./Renderer"),s=1e3,o=.04,a=[];i(s),r.update=function(){gl.clearColor(.4,.4,.4,1),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);for(var t=0;t<a.length;t++){var e=a[t];e.x+=e.sx,e.y+=e.sy,(e.x>1&&e.sx>0||e.x<-1&&e.sx<0)&&(e.sx*=-1),(e.y>1&&e.sy>0||e.y<-1&&e.sy<0)&&(e.sy*=-1)}n.tiles(assets.bunny,a),btnp.A&&(i(s),console.log(a.length))}},{"./Renderer":6}],8:[function(t,e,r){function i(t){return t._glTexture?t._glTexture:(texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,texture),c.pixelStorei(c.UNPACK_ALIGNMENT,!0),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,t),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),t._glTexture=texture,texture)}function n(){this.gl=c,this.program=p}var s=t("domUtils"),o=settings.screen.width,a=settings.screen.height,h=settings.screen.pixelSize[0],u=settings.screen.pixelSize[1];s.removeDom($screen.canvas);var l=s.createDom("canvas");l.width=o,l.height=a,l.style.width=o*h+"px",l.style.height=a*u+"px";var c=l.getContext("webgl",{antialias:!1});c.viewport(0,0,l.width,l.height),c.disable(c.BLEND),c.disable(c.DEPTH_TEST),c.depthMask(!1);var p=null;window.gl=c,n.prototype.useProgram=function(t){if(this.program===t)return t;if(null!==this.program){var e=c.getProgramParameter(this.program,c.ACTIVE_ATTRIBUTES),r=c.getProgramParameter(t,c.ACTIVE_ATTRIBUTES);if(r>e)for(var i=e;i<r;i++)c.enableVertexAttribArray(i);else if(r<e)for(var i=r;i<e;i++)c.disableVertexAttribArray(i)}return this.program=t,c.useProgram(t),t},n.prototype.bindTexture=function(t,e){var r=i(t);c.activeTexture(c.TEXTURE0+e),c.bindTexture(c.TEXTURE_2D,r)},e.exports=window.$screen=new n},{domUtils:4}],9:[function(t,e,r){function i(t,e){var r=s.createShader(e);if(s.shaderSource(r,t),s.compileShader(r),!s.getShaderParameter(r,s.COMPILE_STATUS))throw new Error(s.getShaderInfoLog(r));return r}function n(t,e){var r=i(t,s.VERTEX_SHADER),n=i(e,s.FRAGMENT_SHADER),o=s.createProgram();if(s.attachShader(o,r),s.attachShader(o,n),s.linkProgram(o),!s.getProgramParameter(o,s.LINK_STATUS))throw new Error(s.getProgramInfoLog(o));return o}var s=t("./screenGL").gl,o={};for(var a in assets.shaders){var h=assets.shaders[a];o[a]=n(h.vert,h.frag)}e.exports=o},{"./screenGL":8}],10:[function(t,e,r){function i(){}function n(){for(var t=0;t<m;t++)p[v[t]]=!1,f[v[t]]=!1}function s(t,e){var r=d[t];r&&(e&&!c[r]&&(p[r]=!0),!e&&c[r]&&(f[r]=!0),c[r]=e)}function o(t,e,r){var i=new g(t,e),n=i.canvas;document.body.appendChild(n);var s=n.style;return s.width=t*r[0]+"px",s.height=e*r[1]+"px",i}function a(e,r){function i(){s.update(),n(),_(i)}if(paper(0).pen(1).cls(),e)return print(e),console.error(e);window.assets=r,r.tilesheet&&tilesheet(r.tilesheet),w.loadBank(r.maps);var s=t("../src/main.js");s.update&&(n(),i())}function h(t,e,r,i){rectfill(T-E,A-2,~~(i*E*2),4)}var u=t("../settings.json");window.settings=u;var l=t("assetLoader");window.inherits=function(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})};window.sfx=i,window.music=i,window.audioManager={addChannel:i,loadSound:i,playLoopSound:i,playSound:i,playSoundGroup:i,release:i,setMute:i,setVolume:i,setup:i,stopAllLoopSounds:i,stopLoopSound:i,settings:{}};var c=window.btn={},p=window.btnp={},f=window.btnr={},d={},v=[],m=0;!function(){var t=u.controls||{up:38,down:40,left:37,right:39,A:32,B:88};for(var e in t){var r=t[e];d[r]=e,c[e]=!1,p[e]=!1,f[e]=!1,v.push(e)}m=v.length}(),window.addEventListener("keydown",function(t){t.preventDefault(),s(t.keyCode,!0)}),window.addEventListener("keyup",function(t){t.preventDefault(),s(t.keyCode,!1)}),window.chr$=function(t){return String.fromCharCode(t)},window.clip=function(t,e,r){return Math.max(e,Math.min(r,t))},window.random=function(t){return~~Math.round(t*Math.random())};var g=t("Texture"),w=t("TileMap");window.texture=function(t){var e=new g(t.width,t.height);return e.ctx.drawImage(t,0,0),e},window.tilesheet=function(t){return g.prototype.setGlobalTilesheet(t)};var x=window.$screen=o(u.screen.width,u.screen.height,u.screen.pixelSize);x.setPalette(u.palette),window.cls=function(){return x.cls()},window.sprite=function(t,e,r,i,n,s){return x.sprite(t,e,r,i,n,s)},window.draw=function(t,e,r,i,n,s){return x.draw(t,e,r,i,n,s)},window.rect=function(t,e,r,i){return x.rect(t,e,r,i)},window.rectfill=function(t,e,r,i){return x.rectfill(t,e,r,i)},window.camera=function(t,e){return x.setCamera(t,e)},window.pen=function(t){return x.pen(t)},window.paper=function(t){return x.paper(t)},window.locate=function(t,e){return x.locate(t,e)},window.print=function(t,e,r){return x.print(t,e,r)},window.println=function(t){return x.println(t)},window.getMap=w.getMap;var y=1/60,_=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,y)},T=~~(u.screen.width/2),E=~~(u.screen.width/4),A=~~(u.screen.height/2),R=u.loaderColors||[0,1];Array.isArray(R)||(R=[0,1]);var S=~~R[0],M=~~R[1];paper(S).cls().paper(M).pen(M),rect(T-E-2,A-4,2*E+4,8),l.preloadStaticAssets(a,h)},{"../settings.json":5,"../src/main.js":7,Texture:1,TileMap:2,assetLoader:3}]},{},[10]);